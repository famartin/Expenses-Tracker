<html>
<head>
<%- include('head') %>
<style>
	table, th, td {
		border: 1px solid black;
	}
</style>
</head>
<body>
<div class="container">
<%- include('nav'); %>
<table style="width:100%">
<tr>
	<th>Date</th>
	<th>Amount</th>
	<th>Description</th>
</tr>
<% deposits.forEach(function(deposit){ %>
	<tr><td><%= deposit.date.toDateString() %></td><td><a href="/cancel-deposit/<%= deposit._id %>">$<%= deposit.amount.toFixed(2) %></a></td><td><%= deposit.description.substr(0, 30) %></td></tr>
<% }); %>
</table>
<canvas id="myChart"></canvas>
</div>
<script>
	let myChart = document.getElementById('myChart').getContext('2d');

	let depositChart = new Chart(myChart, {
		type: 'line',
		data: {
			labels: [
				<% deposits.reverse().forEach(function(deposit){ %>
				'<%= deposit.date.toDateString() %>',
				<% }); %>
			],
			datasets: [{
				label: 'Deposits',
				borderColor: '#4286f4',
				data: [
					<% deposits.forEach(function(deposit){ %>
					<%= deposit.amount.toFixed(2) %>,
					<% }); %>
				],
				fill: false
			}]
		},
		options: {
			responsive: true,
			title: {
				display: true,
				text: 'Deposits over a year'
			},
			hover: {
				mode: 'nearest',
				intersect: true
			},
			scales: {
				xAxes: [{
					display: true,
					scaleLabel: {
						display: true,
						labelString: 'Month'
					}
				}],
				yAxes: [{
					display: true,
					scaleLabel: {
						display: true,
						labelString: 'Amount in dollars'
					}
				}]
			}
		}
	});
</script>
</body>
</html>
